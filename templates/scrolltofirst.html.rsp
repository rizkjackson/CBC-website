<%-- Scroll page to first H1 section --%>
<script type="text/javascript">
$(window).load(function() {
  // executes when complete page is fully loaded, including 
  // all frames, objects and images


  // Record location of the beginning of page
  // before displaying the sublogo
  var offsetBefore = 0;
  var first = $("h1:first");
  if (first.length == 0) first = $("h2:first");
  if (first.length > 0) offsetBefore = first.offset().top;

  // Make sub-logo visible
  var sublogocontainer = $("#sublogocontainer");
  if (sublogocontainer.length > 0) {
    var sublogo = $("#sublogo");
    sublogo.css('height', 'auto');
    sublogo.css('margin-bottom', '5ex');
    sublogocontainer.css('visibility', 'visible');
  }

  // If sublogo is taking up too much space, scroll page to the beginning
  if (first.length > 0 && sublogocontainer.length > 0 &&
      sublogocontainer.height() > 0.15*this.innerHeight) {
    var offsetAfter = first.offset().top;
    var shift = offsetAfter - offsetBefore;

    // Do we need to add extra space at the bottom?
    // If not done, the page won't scroll as much as we want
    var pushOffset = $("#push").offset().top;
    var totalHeight = this.innerHeight;
    var available = pushOffset - totalHeight;
    if (available < shift) {
      $("#filler").height(shift-available);
    }

    // Scroll such that the H1 header is at the top
    this.scroll(0, shift);
  }
});
</script>
